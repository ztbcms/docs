(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{442:function(t,a,e){"use strict";e.r(a);var s=e(44),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"开放平台授权"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开放平台授权"}},[t._v("#")]),t._v(" 开放平台授权")]),t._v(" "),e("blockquote",[e("p",[t._v("使用场景：适用于需要开放部分接口給第三方系统接入，第三方系统根据给定的签名规则构建参数请求接口，实现两个系统相互访问。这部分提供了一个开放平台管理，对第三方平台进行管理、授权验证")])]),t._v(" "),e("h3",{attrs:{id:"创建应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建应用"}},[t._v("#")]),t._v(" 创建应用")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://dn-coding-net-production-pp.qbox.me/5fa9a386-d580-4a8b-9fa2-f4cae1fdb34e.png",alt:"图片"}})]),t._v(" "),e("h3",{attrs:{id:"获取app-id与app-secret"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取app-id与app-secret"}},[t._v("#")]),t._v(" 获取app_id与app_secret")]),t._v(" "),e("ul",[e("li",[t._v("首次获取app_secret需要重置\n"),e("img",{attrs:{src:"https://dn-coding-net-production-pp.qbox.me/6817b8b1-81ed-4537-a8b2-5e3b8f55b157.png",alt:"图片"}}),t._v(" "),e("img",{attrs:{src:"https://dn-coding-net-production-pp.qbox.me/ff6eb91a-055c-4600-8cbe-0c5e52bd0312.png",alt:"图片"}})])]),t._v(" "),e("h3",{attrs:{id:"所有的请求需要都要带上app-id与sign"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#所有的请求需要都要带上app-id与sign"}},[t._v("#")]),t._v(" 所有的请求需要都要带上app_id与sign")]),t._v(" "),e("h3",{attrs:{id:"签名规则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#签名规则"}},[t._v("#")]),t._v(" 签名规则")]),t._v(" "),e("ul",[e("li",[t._v("假如GET请求的参数中含有url,url参数需要urlencode,参与签名的url不需要urlencode")])]),t._v(" "),e("p",[t._v("假设传送的GET参数如下：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("app_id：ZTB488696289\ntimestamp：1527488472\ncontent：123\nurl: http%3a%2f%2fwww.zhutibang.cn%3fp1%3dtest1%26p2%3dtest2\n")])])]),e("p",[t._v("第一步：对参数按照key=value的格式，并按照参数名ASCII字典序排序如下：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("app_id=ZTB488696289&content=123&timestamp=1527488472&url=http://www.zhutibang.cn?p1=test1&p2=test2\n")])])]),e("p",[t._v("第二步：拼接app_secret")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("app_id=ZTB488696289&content=123&timestamp=1527488472&url=http://www.zhutibang.cn?p1=test1&p2=test2&app_secret=zATURBDPMvpYBAqV1vntHYxdjTFzxhdM\n")])])]),e("p",[t._v("第三步：md5，获得签名")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("9583ca6d15af2987960e163a85299f21\n")])])]),e("p",[t._v("第四步：最终参数为")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("app_id：ZTB488696289\ntimestamp：1527488472\ncontent：123\nurl: http%3a%2f%2fwww.zhutibang.cn%3fp1%3dtest1%26p2%3dtest2\nsign: 9583ca6d15af2987960e163a85299f21\n")])])]),e("h3",{attrs:{id:"使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),e("p",[t._v("参考"),e("code",[t._v("Auth\\Controller\\CheckDataController")]),t._v("，可以直接继承或根据你的业务逻辑修改即可。其实也就是一个签名校验处理，校验通过就是授权通过！")])])}),[],!1,null,null,null);a.default=r.exports}}]);